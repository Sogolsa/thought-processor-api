{"version":3,"file":"index.js","names":["_express","_interopRequireDefault","require","_mongoose","_cors","_dotenv","_swaggerUiExpress","_yamljs","_routes","e","__esModule","dotenv","config","app","express","use","cors","urlencoded","extended","json","mongoose","connect","process","env","CONNECTION_URI","useNewUrlParser","useUnifiedTopology","then","console","log","err","req","res","next","concat","method","url","routes","send","swaggerDocument","yaml","load","swaggerUi","serve","setup","status","error","stack","PORT","listen"],"sources":["../server/index.js"],"sourcesContent":["import express from 'express';\r\nimport mongoose from 'mongoose';\r\nimport cors from 'cors';\r\nimport dotenv from 'dotenv';\r\nimport swaggerUi from 'swagger-ui-express';\r\nimport yaml from 'yamljs';\r\n\r\nimport routes from './src/routes/routes';\r\nimport './passport';\r\n\r\n// Load environment variables from .env file\r\ndotenv.config();\r\n\r\n// initializing express application\r\nconst app = express();\r\n\r\n// Middleware setup\r\napp.use(cors());\r\napp.use(express.urlencoded({ extended: true })); // parses incoming requests with URL-encoded payloads (form data)\r\napp.use(express.json()); //parses incoming requests with JSON payloads\r\n\r\n// Connecting to the database locally\r\n// mongoose\r\n//   .connect('mongodb://localhost:27017/TOAdb', {\r\n//     useNewUrlParser: true,\r\n//     useUnifiedTopology: true,\r\n//   })\r\n//   .then(() => console.log('MongoDB connected.'))\r\n//   .catch((err) => console.log('MongoDB connection error: ', err));\r\n\r\n// Connecting the application to mongoDB atlas\r\nmongoose\r\n  .connect(process.env.CONNECTION_URI, {\r\n    useNewUrlParser: true,\r\n    useUnifiedTopology: true,\r\n  })\r\n  .then(() => console.log('MongoDB connected.'))\r\n  .catch((err) => console.log('MongoDB connection error: ', err));\r\n\r\napp.use((req, res, next) => {\r\n  console.log(`Incoming request: ${req.method} ${req.url}`);\r\n  next();\r\n});\r\n\r\n// Running the routes inside the app\r\nroutes(app);\r\n\r\n// First Endpoint\r\napp.use('/', (req, res) => {\r\n  res.send('Welcome to Thought Tracking Journal API!');\r\n});\r\n\r\n//Importing Yaml file\r\nconst swaggerDocument = yaml.load('./swagger.yaml');\r\n\r\n//Setting up Swagger UI middleware\r\napp.use('/api-docs', swaggerUi.serve, swaggerUi.setup(swaggerDocument));\r\n\r\napp.use((req, res) => {\r\n  console.log('Fallback handler triggered');\r\n  res.status(404).send('Route not found.');\r\n});\r\n\r\napp.use((err, req, res, next) => {\r\n  console.error(err.stack);\r\n  res.status(500).send('Something broke!');\r\n});\r\n\r\n// Port setup\r\nconst PORT = process.env.PORT || 3000;\r\n\r\n// To know the server is running\r\napp.listen(PORT, () => {\r\n  console.log(`Your sever is running on port ${PORT}`);\r\n});\r\n"],"mappings":"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","ignoreList":[]}